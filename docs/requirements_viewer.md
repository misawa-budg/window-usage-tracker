# Windows版スクリーンタイム（Viewer）要件定義

> このファイルは **Viewer の要件定義書** です。

## 概要
Collector が蓄積した SQLite ログを読み取り、アプリ利用状況を視覚的に確認できる GUI を提供する。

## スコープ
- 対象OS: Windows 11
- 対象フレームワーク: WinUI 3（Windows App SDK）
- 対象期間: `24h` / `1week`
- 対象状態: `Active / Open / Minimized`
- 更新方式: リアルタイム更新は行わず、ユーザーの更新操作で再読込する

## データ入力
- 入力元: Collector が出力した SQLite（`app_events`）
- 利用カラム: `state_start_utc`, `state_end_utc`, `exe_name`, `state`

## 機能要件
- 期間切替（`24h` / `1week`）ができること
- 更新ボタンでDBを再読込し、画面を再構築できること
- アプリ別サマリを表示できること
  - `total`, `active`, `open`, `minimized`
- 状態別の利用内訳（`Active/Open/Minimized`）を可視化できること
- タイムライン表示ができること
  - `24h`: 1時間バケット
  - `1week`: 1日バケット

## 集計ルール
- 区間重なりで利用秒数を算出する（期間をまたぐイベントを正しく計算する）
- 状態ごとに集計し、アプリ単位で合算する
- 保存時刻はUTCだが、表示はローカル時刻で扱う

## 非機能要件
- Viewer は読み取り専用で動作する（DB更新はしない）
- 更新操作中にUIが固まらないこと（非同期で再読込）
- 初期版は単一ユーザー・ローカル利用を前提とする

## 対象外（初期版）
- 自動更新（秒単位のライブ反映）
- 複数端末同期
- URLや詳細タイトルの高度分析
